<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.joeun.mapper.CartMapper">

    <!-- 카트 추가 -->
    <insert id="addCart">
        INSERT INTO cart(user_id, product_id, cart_cnt)
        VALUES ( #{cartUserId},
        #{cartProductId},
        #{cartProductCnt})
    </insert>

    <!-- 카트 삭제 -->
    <delete id="deleteCart">
        delete from cart where cart_id = #{cartId}
    </delete>

    <!-- 카트 수량 수정 -->
    <update id="modifyCount">
        update cart set cart_cnt=#{cartProductCnt} where cart_id = #{cartId}
    </update>


    <!-- 카트 목록 -->
    <select id="getCart" resultType="com.joeun.dto.CartDto">
        SELECT a.cart_id, a.user_id, a.product_id, a.cart_cnt, b.product_name, b.product_price
        FROM cart a LEFT OUTER JOIN product b ON a.product_id = b.product_id
        where user_id = #{cartUserId}
    </select>

    <!-- 카트 확인 -->
    <select id="checkCart" resultType="com.joeun.dto.CartDto">
        select * from cart
        where user_id = #{cartUserId} and product_id = #{cartProductId}
    </select>
</mapper>